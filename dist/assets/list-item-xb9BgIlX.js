import{d as w}from"./index-D7TIu75F.js";function L(n){return n.label||!n.identifier?n.label||"":w(n.identifier)}function $(n,e,o){const t=e.indexStack,l=n.children||[],r=e.createTracker(o),i=[];let s=-1;for(t.push(-1);++s<l.length;){const u=l[s];t[t.length-1]=s,i.push(r.move(e.handle(u,n,e,{before:`
`,after:`
`,...r.current()}))),u.type!=="list"&&(e.bulletLastUsed=void 0),s<l.length-1&&i.push(r.move(k(u,l[s+1],n,e)))}return t.pop(),i.join("")}function k(n,e,o,t){let l=t.join.length;for(;l--;){const r=t.join[l](n,e,o,t);if(r===!0||r===1)break;if(typeof r=="number")return`
`.repeat(1+r);if(r===!1)return`

<!---->

`}return`

`}const I=/\r?\n|\r/g;function E(n,e){const o=[];let t=0,l=0,r;for(;r=I.exec(n);)i(n.slice(t,r.index)),o.push(r[0]),t=r.index+r[0].length,l++;return i(n.slice(t)),o.join("");function i(s){o.push(e(s,l,!s))}}function g(n){if(!n._compiled){const e=(n.atBreak?"[\\r\\n][\\t ]*":"")+(n.before?"(?:"+n.before+")":"");n._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(n.character)?"\\":"")+n.character+(n.after?"(?:"+n.after+")":""),"g")}return n._compiled}function C(n,e){return x(n,e.inConstruct,!0)&&!x(n,e.notInConstruct,!1)}function x(n,e,o){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return o;let t=-1;for(;++t<e.length;)if(n.includes(e[t]))return!0;return!1}function T(n,e,o){const t=(o.before||"")+(e||"")+(o.after||""),l=[],r=[],i={};let s=-1;for(;++s<n.unsafe.length;){const c=n.unsafe[s];if(!C(n.stack,c))continue;const h=g(c);let a;for(;a=h.exec(t);){const p="before"in c||!!c.atBreak,m="after"in c,d=a.index+(p?a[1].length:0);l.includes(d)?(i[d].before&&!p&&(i[d].before=!1),i[d].after&&!m&&(i[d].after=!1)):(l.push(d),i[d]={before:p,after:m})}}l.sort(S);let u=o.before?o.before.length:0;const f=t.length-(o.after?o.after.length:0);for(s=-1;++s<l.length;){const c=l[s];c<u||c>=f||c+1<f&&l[s+1]===c+1&&i[c].after&&!i[c+1].before&&!i[c+1].after||l[s-1]===c-1&&i[c].before&&!i[c-1].before&&!i[c-1].after||(u!==c&&r.push(b(t.slice(u,c),"\\")),u=c,/[!-/:-@[-`{-~]/.test(t.charAt(c))&&(!o.encode||!o.encode.includes(t.charAt(c)))?r.push("\\"):(r.push("&#x"+t.charCodeAt(c).toString(16).toUpperCase()+";"),u++))}return r.push(b(t.slice(u,f),o.after)),r.join("")}function S(n,e){return n-e}function b(n,e){const o=/\\(?=[!-/:-@[-`{-~])/g,t=[],l=[],r=n+e;let i=-1,s=0,u;for(;u=o.exec(r);)t.push(u.index);for(;++i<t.length;)s!==t[i]&&l.push(n.slice(s,t[i])),l.push("\\"),s=t[i];return l.push(n.slice(s)),l.join("")}function _(n){const e=n||{},o=e.now||{};let t=e.lineShift||0,l=o.line||1,r=o.column||1;return{move:u,current:i,shift:s};function i(){return{now:{line:l,column:r},lineShift:t}}function s(f){t+=f}function u(f){const c=f||"",h=c.split(/\r?\n|\r/g),a=h[h.length-1];return l+=h.length-1,r=h.length===1?r+a.length:1+a.length+t,c}}function z(n,e,o){const t=e.indexStack,l=n.children||[],r=[];let i=-1,s=o.before;t.push(-1);let u=e.createTracker(o);for(;++i<l.length;){const f=l[i];let c;if(t[t.length-1]=i,i+1<l.length){let h=e.handle.handlers[l[i+1].type];h&&h.peek&&(h=h.peek),c=h?h(l[i+1],n,e,{before:"",after:"",...u.current()}).charAt(0):""}else c=o.after;r.length>0&&(s==="\r"||s===`
`)&&f.type==="html"&&(r[r.length-1]=r[r.length-1].replace(/(\r?\n|\r)$/," "),s=" ",u=e.createTracker(o),u.move(r.join(""))),r.push(u.move(e.handle(f,n,e,{...u.current(),before:s,after:c}))),s=r[r.length-1].slice(-1)}return t.pop(),r.join("")}y.peek=j;function y(n,e,o){let t=n.value||"",l="`",r=-1;for(;new RegExp("(^|[^`])"+l+"([^`]|$)").test(t);)l+="`";for(/[^ \r\n]/.test(t)&&(/^[ \r\n]/.test(t)&&/[ \r\n]$/.test(t)||/^`|`$/.test(t))&&(t=" "+t+" ");++r<o.unsafe.length;){const i=o.unsafe[r],s=g(i);let u;if(i.atBreak)for(;u=s.exec(t);){let f=u.index;t.charCodeAt(f)===10&&t.charCodeAt(f-1)===13&&f--,t=t.slice(0,f)+" "+t.slice(u.index+1)}}return l+t+l}function j(){return"`"}function v(n){const e=n.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function A(n){const e=n.options.listItemIndent||"tab";if(e===1||e==="1")return"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function F(n,e,o,t){const l=A(o);let r=o.bulletCurrent||v(o);e&&e.type==="list"&&e.ordered&&(r=(typeof e.start=="number"&&e.start>-1?e.start:1)+(o.options.incrementListMarker===!1?0:e.children.indexOf(n))+r);let i=r.length+1;(l==="tab"||l==="mixed"&&(e&&e.type==="list"&&e.spread||n.spread))&&(i=Math.ceil(i/4)*4);const s=o.createTracker(t);s.move(r+" ".repeat(i-r.length)),s.shift(i);const u=o.enter("listItem"),f=o.indentLines(o.containerFlow(n,s.current()),c);return u(),f;function c(h,a,p){return a?(p?"":" ".repeat(i))+h:(p?r:r+" ".repeat(i-r.length))+h}}export{L as a,z as b,$ as c,y as d,v as e,E as i,F as l,C as p,T as s,_ as t};
